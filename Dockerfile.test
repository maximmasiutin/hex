FROM gcc:12.5.0-bookworm

WORKDIR /app

# Copy source files
COPY hex.cpp .
COPY tests.cpp .

# Compile main program
RUN g++ -std=c++11 -O1 -Wall -Wextra -o hex hex.cpp

# Compile tests
RUN g++ -std=c++11 -O1 -Wall -Wextra -o tests tests.cpp

# Run as non-root user
USER nobody

# Default command runs tests
CMD ["./tests"]
