FROM gcc:15.1.0-bookworm

WORKDIR /app

# Copy source file
COPY hex.cpp .

# Compile for Sapphire Rapids (newer Intel processors)
RUN g++ -std=c++11 -O3 -march=sapphirerapids -o hex hex.cpp

# Run as non-root user
USER nobody

# Default command runs the game
CMD ["./hex"]
